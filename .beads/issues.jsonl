{"id":"keisei-156","title":"P1-14: Fix RuntimeError self-catch in core_manager","description":"evaluation/core_manager.py — except RuntimeError handler meant to catch no running event loop also catches RuntimeErrors intentionally raised within the try block, silently swallowing real errors.","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:42.14007694+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:24:36.315289702+11:00","closed_at":"2026-02-08T01:24:36.315289702+11:00","close_reason":"Fixed broad except RuntimeError by using try/except/else pattern. Removed dead nested event loop code (broken on Python 3.12+). Sync methods now raise clear errors when called from async context.","dependencies":[{"issue_id":"keisei-156","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:49.923764362+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-2c1","title":"P1-12: Fix override file merge replacing entire config sections","description":"utils/utils.py:143 — Structured override config does config_data[k]=v (shallow replace) instead of deep merge. Override specifying training.learning_rate=0.001 discards ALL other training defaults.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:24.289012157+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T19:45:35.625757895+11:00","closed_at":"2026-02-07T19:45:35.625757895+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-2c1","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:39.746659827+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-3qf","title":"P2-05: Fix duplicate TEST_BATCH_SIZE constants","description":"constants.py lines 75 and 152 — Defined as 16 at line 75, redefined as 32 at line 152. Second silently overwrites first.","status":"in_progress","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:26.047924431+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T20:15:54.498451498+11:00","dependencies":[{"issue_id":"keisei-3qf","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:15.376095715+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-6af","title":"P2-01: Fix __deepcopy__ dropping move_history","description":"shogi/shogi_game.py — __deepcopy__ omits move_history. Simulations and tree searches lose all game history.","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:51.223964563+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:56:55.853623687+11:00","closed_at":"2026-02-08T01:56:55.853623687+11:00","close_reason":"Fix already committed in 8565ba1. Added regression test test_deepcopy_preserves_move_history.","dependencies":[{"issue_id":"keisei-6af","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:55.013166631+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-6v5","title":"P2-09: Make wandb import conditional","description":"training/model_manager.py, training/utils.py — Unconditional import wandb makes entire modules fail to import if wandb not installed, violating optional-integration pattern.","status":"in_progress","priority":2,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:02:01.656028992+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T20:15:54.573760267+11:00","dependencies":[{"issue_id":"keisei-6v5","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:35.738554971+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-7dh","title":"Sprint 4: Robustness \u0026 Safety","description":"Game engine safety, config handling, resource management. Includes P1-06 through P1-14 and P2-01 through P2-10.","status":"open","priority":2,"issue_type":"epic","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T10:59:49.026825899+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T10:59:49.026825899+11:00","dependencies":[{"issue_id":"keisei-7dh","depends_on_id":"keisei-qwm","type":"blocks","created_at":"2026-02-07T11:04:18.371781094+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-7rq","title":"P1-07: Remove redundant attack-check computation in legal move gen","description":"shogi/shogi_rules_logic.py:527-543 — generate_all_legal_moves computes a full attack check that is immediately discarded. Subsequent generate_raw_moves + is_legal_move filter already handles check detection. Approximately 2x slower than necessary.","status":"closed","priority":2,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:05.578984765+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T02:05:25.742010387+11:00","closed_at":"2026-02-08T02:05:25.742010387+11:00","close_reason":"Removed redundant find_king + check_if_square_is_attacked calls in both board-move and drop-move loops. Results were only consumed by commented-out trace prints. is_king_in_check_after_simulated_move already performs the same check.","dependencies":[{"issue_id":"keisei-7rq","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:29.573305534+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-8ag","title":"Fix WebUI non-deterministic shutdown (join thread, close loop)","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T20:02:43.466758114+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T20:09:33.504040405+11:00","closed_at":"2026-02-07T20:09:33.504040405+11:00","close_reason":"Closed"}
{"id":"keisei-8ce","title":"P2-10: Fix non-standard Elo batch normalization","description":"evaluation/opponents/elo_registry.py — Divides scores by len(results) before K-factor. 100-game batch gives same update magnitude as 1-game batch.","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:02:10.727548749+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T23:17:12.701661131+11:00","closed_at":"2026-02-07T23:17:12.701661131+11:00","close_reason":"Fixed batch normalization: use K*(S_total - N*E) instead of K*(S_total/N - E). Added 4 regression tests.","dependencies":[{"issue_id":"keisei-8ce","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:40.825023827+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-9bq","title":"P2-08: Fix se_ratio falsy-value override bug","description":"training/model_manager.py:83 — getattr(...) or config_default pattern means se_ratio=0 falls through to config default instead of being treated as valid value.","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:52.687764261+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:46:51.873022349+11:00","closed_at":"2026-02-08T01:46:51.873022349+11:00","close_reason":"Replaced getattr() or default with explicit is not None checks for all 5 config fields in ModelManager.__init__. se_ratio=0 now correctly disables SE blocks.","dependencies":[{"issue_id":"keisei-9bq","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:30.648645552+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-b1d","title":"P2-03: Add board_history pruning mechanism","description":"shogi/shogi_game.py — Every move appends a 9x9 board copy with no pruning. Unbounded growth.","status":"closed","priority":3,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:08.087800306+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:06:27.561718036+11:00","closed_at":"2026-02-08T01:06:27.561718036+11:00","close_reason":"Removed redundant board_history (dead data duplicating move_history state_hash). Fixed 4 test files referencing it.","dependencies":[{"issue_id":"keisei-b1d","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:05.196986147+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-bag","title":"Fix WebUI broadcaster infinite error loop","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T20:02:43.497856921+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T20:09:33.509587439+11:00","closed_at":"2026-02-07T20:09:33.509587439+11:00","close_reason":"Closed"}
{"id":"keisei-c6k","title":"Sprint 1: Security \u0026 Crashes","description":"Fix directory traversal vulnerability, save_checkpoint crash, torch.load security, and escaped newlines. Straightforward fixes with immediate impact.","status":"closed","priority":0,"issue_type":"epic","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T10:59:56.946169357+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:26:16.228738915+11:00","closed_at":"2026-02-07T11:26:16.228738915+11:00","close_reason":"All 4 P0 bugs fixed: directory traversal, torch.load security, save_checkpoint args, escaped newlines"}
{"id":"keisei-c6k.1","title":"P0-01: Fix directory traversal in WebUI HTTP server","description":"web_server.py:22-29 — translate_path() bypasses SimpleHTTPRequestHandler path sanitization by directly joining user-supplied URL paths with static directory via os.path.join, without normalizing or rejecting .. path components. Combined with binding to 0.0.0.0, attackers can read arbitrary files. Fix: Use os.path.normpath + prefix check, or delegate to parent class translate_path().","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:09.055305463+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:26:08.229369355+11:00","closed_at":"2026-02-07T11:26:08.229369355+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-c6k.1","depends_on_id":"keisei-c6k","type":"parent-child","created_at":"2026-02-07T11:00:09.056200839+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-c6k.2","title":"P0-06: Add weights_only=True to all torch.load calls","description":"torch.load without weights_only=True in 4 locations allows arbitrary code execution from untrusted checkpoints: ppo_agent.py:502, training/utils.py:32, evaluation/core_manager.py:94+181, evaluation/core/model_manager.py:111. Fix: Add weights_only=True; use torch.serialization.add_safe_globals() for non-tensor metadata if needed.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:19.968984777+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:26:08.236990274+11:00","closed_at":"2026-02-07T11:26:08.236990274+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-c6k.2","depends_on_id":"keisei-c6k","type":"parent-child","created_at":"2026-02-07T11:00:19.969918215+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-c6k.3","title":"P0-04: Fix save_checkpoint call with wrong arguments","description":"callbacks.py:147-152 — EvaluationCallback.on_step_end() calls save_checkpoint(agent, timestep, run_artifact_dir, name) with 4 args in wrong order. ModelManager.save_checkpoint requires (agent, model_dir, timestep, episode_count, stats, run_name, is_wandb_active). Will raise TypeError at runtime. Also return value is Tuple[bool, Optional[str]] but treated as path string. Fix: Pass all 7 required args in correct order; unpack return tuple.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:31.085610021+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:26:08.244517927+11:00","closed_at":"2026-02-07T11:26:08.244517927+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-c6k.3","depends_on_id":"keisei-c6k","type":"parent-child","created_at":"2026-02-07T11:00:31.087006425+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-c6k.4","title":"P0-07: Fix escaped newlines in log file writes","description":"utils.py:514,561 — TrainingLogger.log() and EvaluationLogger.log() write literal backslash-n instead of actual newline to log files, making all log files single unbroken lines. Fix: Change escaped backslash-n to actual newline in both write calls.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:40.444364564+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:26:08.251780153+11:00","closed_at":"2026-02-07T11:26:08.251780153+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-c6k.4","depends_on_id":"keisei-c6k","type":"parent-child","created_at":"2026-02-07T11:00:40.445177537+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n","title":"Sprint 2: Training Correctness","description":"Fix evaluate_actions return order, batch-wide NaN fallback, silent checkpoint failure, hand piece normalization, and training state safety. Directly impacts training fidelity.","status":"closed","priority":0,"issue_type":"epic","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T10:59:55.554932038+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:49:51.443384475+11:00","closed_at":"2026-02-07T11:49:51.443384475+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n","depends_on_id":"keisei-c6k","type":"blocks","created_at":"2026-02-07T11:04:08.226541116+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n.1","title":"P0-02: Align evaluate_actions return order across protocol and implementations","description":"Protocol docstring says (log_probs, values, entropy). BaseActorCriticModel returns (log_probs, entropy, value). PPO Agent unpacks as (log_probs, entropy, new_values) — matches implementation. DynamicActorCritic in evaluation/core/model_manager.py:428 returns (log_probs, value, entropy) — matches NEITHER. Training path is correct but evaluation path is broken. Fix: Align protocol docstring, all implementations, and all callers to single order (log_probs, entropy, value) matching the training path.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:08.790688843+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:31:17.194722909+11:00","closed_at":"2026-02-07T11:31:17.194722909+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n.1","depends_on_id":"keisei-d8n","type":"parent-child","created_at":"2026-02-07T11:00:08.791796226+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n.2","title":"P0-03: Fix batch-wide NaN fallback in get_action_and_value","description":"base_actor_critic.py:93-101 — When any single sample in a batch has all legal actions masked, torch.isnan(probs).any() triggers batch-wide uniform fallback replacing policy distribution for ALL samples including valid ones. Note: evaluate_actions already handles per-row NaN correctly at line 168-174. Fix: Apply NaN fallback per-sample in get_action_and_value, matching evaluate_actions pattern.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:19.507584835+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:31:17.200323745+11:00","closed_at":"2026-02-07T11:31:17.200323745+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n.2","depends_on_id":"keisei-d8n","type":"parent-child","created_at":"2026-02-07T11:00:19.508870572+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n.3","title":"P0-08: Raise on checkpoint load failure instead of silent continue","description":"model_manager.py:346,362 — PPOAgent.load_model() returns dict with error key on failure. ModelManager stores this as self.checkpoint_data and returns True (success). Training continues from random initialization believing it has resumed. Fix: Validate returned dict structure; raise exception on checkpoint load failure.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:29.95218997+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:31:17.205905525+11:00","closed_at":"2026-02-07T11:31:17.205905525+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n.3","depends_on_id":"keisei-d8n","type":"parent-child","created_at":"2026-02-07T11:00:29.953409643+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n.4","title":"P0-09: Fix hand piece normalization with per-type maximums","description":"shogi_game_io.py:514,527 — Hand piece channel normalization divides by 18.0 for ALL piece types. Correct maximums: Pawns=18, Lances/Knights/Silvers/Golds=4, Bishops/Rooks=2. Using /18.0 for Bishops means 2 in hand produces 0.11 instead of 1.0, compressing dynamic range. Fix: Use per-piece-type maximum counts for normalization.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:40.933563592+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:49:44.709136447+11:00","closed_at":"2026-02-07T11:49:44.709136447+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n.4","depends_on_id":"keisei-d8n","type":"parent-child","created_at":"2026-02-07T11:00:40.934419906+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n.5","title":"P1-09: Add try/finally for processing state in training loop","description":"training_loop_manager.py:138-149 — If perform_ppo_update raises, set_processing(False) is never called, permanently leaving metrics manager in stale processing state. Fix: Wrap PPO update in try/finally to ensure set_processing(False) is always called.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:50.703949621+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:49:44.714897333+11:00","closed_at":"2026-02-07T11:49:44.714897333+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n.5","depends_on_id":"keisei-d8n","type":"parent-child","created_at":"2026-02-07T11:00:50.704781929+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-d8n.6","title":"P1-10: Add try/finally for eval/train mode in callbacks","description":"callbacks.py — EvaluationCallback sets model to eval mode before evaluation but has no try/finally to restore train mode if evaluation raises. This silently degrades subsequent training. Fix: Wrap evaluation in try/finally to ensure model.train() is always called.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:00.170656034+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:49:44.721491338+11:00","closed_at":"2026-02-07T11:49:44.721491338+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-d8n.6","depends_on_id":"keisei-d8n","type":"parent-child","created_at":"2026-02-07T11:01:00.171494323+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-e3w","title":"Fix WebUI false-positive startup reporting","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T20:02:43.525137019+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T20:09:33.515046539+11:00","closed_at":"2026-02-07T20:09:33.515046539+11:00","close_reason":"Closed"}
{"id":"keisei-gfx","title":"P2-02: Add bounds checking to set_piece","description":"shogi/shogi_game.py — set_piece allows out-of-bounds writes with no bounds checking on row/column coordinates.","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:59.342745083+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:56:55.878192305+11:00","closed_at":"2026-02-08T01:56:55.878192305+11:00","close_reason":"Fix already committed in 8565ba1. Added regression test test_set_piece_rejects_out_of_bounds with 5 boundary cases.","dependencies":[{"issue_id":"keisei-gfx","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:00.099607044+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-i2l","title":"P1-08: Add exception safety to check_for_uchi_fu_zume","description":"shogi/shogi_rules_logic.py — check_for_uchi_fu_zume makes speculative moves to test but uses no try/finally to ensure state is restored on exception. Game state corruption if exception occurs.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:14.736521236+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T19:45:35.623048333+11:00","closed_at":"2026-02-07T19:45:35.623048333+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-i2l","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:34.657560766+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-l5m","title":"P1-13: Decouple Elo tracking from log availability","description":"training/callbacks.py — Elo registry update gated by log_both is not None. If logging unavailable, Elo tracking silently stops. Should be independent of logging.","status":"closed","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:33.395941118+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:30:16.920279888+11:00","closed_at":"2026-02-08T01:30:16.920279888+11:00","close_reason":"Moved Elo registry update out of log_both guard in both EvaluationCallback and AsyncEvaluationCallback. Elo tracking now runs independently of logging availability.","dependencies":[{"issue_id":"keisei-l5m","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:44.835688276+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-ldl","title":"P2-07: Handle all-legal-actions-masked case properly","description":"core/base_actor_critic.py — When all legal actions masked, produces uniform distribution over all 13527 actions including illegal ones.","status":"in_progress","priority":2,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:43.525738166+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T20:15:54.522960499+11:00","dependencies":[{"issue_id":"keisei-ldl","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:25.552165242+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm","title":"Sprint 3: Evaluation Pipeline","description":"Fix or remove CustomEvaluator placeholder, unbreak async callbacks, fix ladder/benchmark config access bugs, fix inverted recency bonus, fix EvaluationResult deserialization, fix blocking async. Isolated to evaluation subsystem.","status":"closed","priority":1,"issue_type":"epic","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T10:59:52.982559309+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:46.700227135+11:00","closed_at":"2026-02-07T17:04:46.700227135+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm","depends_on_id":"keisei-d8n","type":"blocks","created_at":"2026-02-07T11:04:13.298505147+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.1","title":"P0-05: Replace CustomEvaluator random results with NotImplementedError","description":"evaluation/strategies/custom.py:271-286 — evaluate_step() returns random.choice([0,1,None]) as results. All 414 lines of evaluation orchestration produce fabricated metrics with no actual Shogi games. Fix: Raise NotImplementedError or implement actual game execution. Decision needed: delete entirely vs implement.","status":"closed","priority":0,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:02.324253758+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.703969482+11:00","closed_at":"2026-02-07T17:04:42.703969482+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.1","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:02.325113097+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.2","title":"P1-01: Remove or fix dead async callback path","description":"train.py and training_loop_manager.py — main() is async via asyncio.run(), so event loop is always active. _run_async_callbacks_sync() detects running loop and skips all async callbacks with warning. Async evaluation path is structurally dead. Decision needed: remove async path entirely or restructure to work.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:10.774279981+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.709608729+11:00","closed_at":"2026-02-07T17:04:42.709608729+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.2","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:10.775324917+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.3","title":"P1-02: Fix ladder evaluator config access bugs (3 locations)","description":"evaluation/strategies/ladder.py — (1) Line 512: getattr(self.config, num_games_per_match, 2) always returns 2, value lives in strategy_params. (2) Line 726: getattr(self.config, num_opponents_to_select, 5) always returns 5. (3) Line 715: opp.name != agent_rating compares string to float, always True, making opponent self-exclusion a no-op.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:19.426956451+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.71543211+11:00","closed_at":"2026-02-07T17:04:42.71543211+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.3","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:19.428349129+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.4","title":"P1-03: Fix benchmark evaluator config access bug","description":"evaluation/strategies/benchmark.py:158 — getattr(self.config, num_games_per_benchmark_case, 1) always returns 1 because parameter is in strategy_params, not a direct attribute. Multi-game-per-case configurations silently ignored.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:28.483562827+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.722436393+11:00","closed_at":"2026-02-07T17:04:42.722436393+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.4","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:28.484502707+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.5","title":"P1-04: Fix inverted recency bonus in opponent selection","description":"evaluation/opponents/enhanced_manager.py:351 — Comment says Bonus for less recently played opponents but math awards higher bonus to MORE recently played opponents, inverting intended curriculum behavior. Fix: Invert the recency calculation.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:38.240636341+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.729586047+11:00","closed_at":"2026-02-07T17:04:42.729586047+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.5","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:38.24149549+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.6","title":"P1-05: Fix EvaluationResult.from_dict() undefined function call","description":"evaluation/core/evaluation_result.py:330-333 — from_dict() calls get_config_class() which is never defined or imported. Fallback calls EvaluationConfig.from_dict() which doesn't exist on the Pydantic model. Deserialization is completely broken.","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:47.826471279+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.735574798+11:00","closed_at":"2026-02-07T17:04:42.735574798+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.6","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:47.82729966+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-qwm.7","title":"P1-11: Fix blocking async in parallel_executor","description":"evaluation/core/parallel_executor.py — execute_games_parallel is declared async but blocks the event loop with synchronous concurrent.futures.as_completed iteration. Fix: Use asyncio-compatible pattern (loop.run_in_executor or asyncio.as_completed).","status":"closed","priority":1,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:56.845925628+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T17:04:42.741209056+11:00","closed_at":"2026-02-07T17:04:42.741209056+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-qwm.7","depends_on_id":"keisei-qwm","type":"parent-child","created_at":"2026-02-07T11:00:56.846841753+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-r9s","title":"P1-06: Delete dead features.py build_core46 function","description":"shogi/features.py — build_core46 uses wrong attribute access patterns, wrong method calls, no perspective flip. Completely diverges from production shogi_game_io.py. Would crash if called. Maintenance trap. Fix: Delete the function entirely.","status":"closed","priority":1,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T10:59:57.561889814+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T19:45:35.620710977+11:00","closed_at":"2026-02-07T19:45:35.620710977+11:00","close_reason":"Closed","dependencies":[{"issue_id":"keisei-r9s","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:02:24.472841245+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-uk4","title":"P2-06: Deduplicate observation constants","description":"shogi/shogi_core_definitions.py and constants.py — Same constants defined in two places with different names; drift risk.","status":"closed","priority":3,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:34.457297454+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T23:18:45.52398982+11:00","closed_at":"2026-02-07T23:18:45.52398982+11:00","close_reason":"Removed 10 dead duplicate observation constants from constants.py. Canonical source is shogi_core_definitions.py.","dependencies":[{"issue_id":"keisei-uk4","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:20.465713958+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-w7e","title":"P2-04: Fix KIF export multiple bugs","description":"shogi/shogi_game_io.py — Uses current hands instead of initial position; drops drop moves; non-standard notation format; termination_map case mismatch.","status":"closed","priority":3,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:17.207931553+11:00","created_by":"John Morrissey","updated_at":"2026-02-08T01:06:27.590767616+11:00","closed_at":"2026-02-08T01:06:27.590767616+11:00","close_reason":"Fixed 4 KIF bugs: initial hands now empty for HIRATE, drop moves included via encode_move_to_sfen_string, termination_map keys match enum values.","dependencies":[{"issue_id":"keisei-w7e","depends_on_id":"keisei-7dh","type":"parent-child","created_at":"2026-02-07T11:03:10.28867677+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28","title":"Sprint 5: Technical Debt","description":"Code duplication, dead code cleanup, triple Elo consolidation, missing type annotations, and minor issues. P2-11 through P2-28 and all P3 items.","status":"open","priority":3,"issue_type":"epic","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T10:59:52.178153491+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T10:59:52.178153491+11:00","dependencies":[{"issue_id":"keisei-y28","depends_on_id":"keisei-7dh","type":"blocks","created_at":"2026-02-07T11:04:23.443218869+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.1","title":"P2-11..14: Fix evaluation tracking and metrics issues","description":"P2-11: Dead Elo tracking in enhanced_manager.py (elo_rating never updated). P2-12: Display refresh iterates model parameters at 4Hz (GPU-CPU transfer). P2-13: Incomplete checkpoint restore in metrics_manager.py (trend data, Elo lost on resume). P2-14: Non-thread-safe processing flag in metrics_manager.py.","status":"open","priority":3,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:03.809972547+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:00:03.809972547+11:00","dependencies":[{"issue_id":"keisei-y28.1","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:00:03.81118106+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.2","title":"P2-15..16: Fix hardcoded dimensions and memory waste","description":"P2-15: Hard-coded tensor dimensions (46,9,9) and (13527) in experience_buffer.py instead of parameterized. P2-16: Weight cloning for UI doubles peak memory in trainer.py:266-284.","status":"open","priority":3,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:13.503341934+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:00:13.503341934+11:00","dependencies":[{"issue_id":"keisei-y28.2","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:00:13.50421041+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.3","title":"P2-17..19: Fix config and profiling issues","description":"P2-17: Hardcoded dummy config in agent_loading.py:48-170 (120-line AppConfig, architecture mismatch risk). P2-18: CLI defaults override config in train.py (argparse defaults for strategy/num_games/opponent_type always override config). P2-19: Profiling unbounded memory growth in profiling.py (~40MB for 1M-step run).","status":"open","priority":3,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:23.833371608+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:00:23.833371608+11:00","dependencies":[{"issue_id":"keisei-y28.3","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:00:23.834233321+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.4","title":"P2-20..24: Fix WebUI and parallel worker issues","description":"P2-20: SO_REUSEADDR set after bind in web_server.py:97 (no effect). P2-21: WebUI max_connections=10 never enforced. P2-22: WebUI panels reference nonexistent attributes, display fabricated data. P2-23: Parallel worker silently drops experience when queues full. P2-24: No worker restart mechanism in parallel_manager.py.","status":"open","priority":3,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:34.081042578+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:00:34.081042578+11:00","dependencies":[{"issue_id":"keisei-y28.4","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:00:34.082057629+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.5","title":"P2-25..28: Fix evaluation and training infrastructure issues","description":"P2-25: evaluation/core/model_manager.py staged as deleted but still imported. P2-26: run_async()/run() ~100 lines duplicated in training_loop_manager.py. P2-27: User-controlled run names unsanitized in paths (session_manager.py:120). P2-28: Dangerous decompression fallback in parallel/utils.py (can return 0-dim array).","status":"open","priority":3,"issue_type":"bug","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:45.405713479+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:00:45.405713479+11:00","dependencies":[{"issue_id":"keisei-y28.5","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:00:45.406564923+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.6","title":"P3: Dead code cleanup","description":"Remove dead code across codebase: dead GameTerminationReason class, dead OBS constants, build_core46 (if not already removed in Sprint 4), test/dummy FeatureSpec entries, _pad_symbol no-op, _handle_checkpoint_resume never called, _prepare_demo_info never called, previous_model_selector.py unused, parallel model_sync functions never called, communication._shared_model_data unused, validate_config always-true, PerformanceGuard unused, evaluate_step_in_memory no-op, create_compilation_decorator never invokes validator, _timer_context unused.","status":"open","priority":4,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:00:58.282848313+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:00:58.282848313+11:00","dependencies":[{"issue_id":"keisei-y28.6","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:00:58.284078316+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.7","title":"P3: Code duplication cleanup","description":"Reduce code duplication: _format_hand duplicated in display_components.py, ~260 lines game-loop code across 4 eval strategies, eval interval alignment tripled in callback_manager.py, run()/run_async() ~80pct identical in training_loop_manager.py, save_checkpoint/save_final_checkpoint/save_final_model ~60 lines duplicated, move formatting code ~80pct duplicated.","status":"open","priority":4,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:09.377645339+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:01:09.377645339+11:00","dependencies":[{"issue_id":"keisei-y28.7","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:01:09.378454534+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.8","title":"P3: Consolidate triple Elo implementation","description":"Three independent Elo implementations with slightly different math: training/elo_rating.py (self-play), evaluation/analytics/elo_tracker.py (analytics), evaluation/opponents/elo_registry.py (opponent tracking). Consolidate to single shared implementation.","status":"open","priority":4,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:18.578990617+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:01:18.578990617+11:00","dependencies":[{"issue_id":"keisei-y28.8","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:01:18.580182047+11:00","created_by":"John Morrissey"}]}
{"id":"keisei-y28.9","title":"P3: Minor code quality issues","description":"Unused imports (asyncio, sys, signal, torch.profiler, ActorCriticProtocol in various files). Missing type annotations in setup_manager.py, session_manager.py, utils.py. Minor issues: DisplayComponent protocol unused, MultiMetricSparkline unbounded growth, TerminalInfo.unicode_ok unused, debug border colors, inconsistent rate units, format_ppo_metrics side effect, log_error_to_stderr used for success, error games counted as draws, sys.path.insert at module level, is_in_check masks corruption.","status":"open","priority":4,"issue_type":"task","owner":"544926+tachyon-beep@users.noreply.github.com","created_at":"2026-02-07T11:01:30.898667036+11:00","created_by":"John Morrissey","updated_at":"2026-02-07T11:01:30.898667036+11:00","dependencies":[{"issue_id":"keisei-y28.9","depends_on_id":"keisei-y28","type":"parent-child","created_at":"2026-02-07T11:01:30.900278674+11:00","created_by":"John Morrissey"}]}
